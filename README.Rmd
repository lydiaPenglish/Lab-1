---
title: "ReadMe"
author: "Lydia English, Earl Hur, Min Zhang"
date: "February 4, 2019"
output: html_document
---

#1. Document the error you encounter (be as concise and specific as you can at the same time)
There were many packages that needed to be installed to knit the index.Rmd. The first problem that we have ran into was that the *emo* package was not available from usual CRAN repository. Another issue came with an error message: *In system(cmd) : 'make' not found*

#2. Describe one approach on how you tried to solve the problem (and how this did not work)
Instead of install this package from the CRAN, we installed this package through hadley's github. Using *devtools::install_github("hadley/emo")*, we could successfully install the package.

Another error we have come across is in the Rcpp.Rmd document:

`Line 77 Error in sourceCpp(code = code, env = env, rebuild = rebuild, cacheDir = cacheDir, : Error 1 occured building shared library. Calls: local ... withVisible -> eval -> eval -> cppFunction -> sourceCpp`

If we navigate to line 77 in the Rcpp.Rmd document we find the following script:

```{r add, eval=FALSE}
cppFunction('int add(int x, int y, int z) {
  int sum = x + y + z;
  return sum;
}')
# add works like a regular R function
add
add(1, 2, 3)
```

We've tried downloading and updating Rtools and making sure other packages were updated but this was unsuccessful. However another group member was succesfully able to knit the .html file. 

**Weather Stations**

```{r}
library(readr)

?read_fwf()
col_positions <- readr::fwf_widths(
  c(2, 1, 2, 6, 9, 10, 8, 2, 30, 8, 8, 7, 2)
)

weather <- data.frame(readr::read_fwf("ushcn-v2.5-stations.txt", col_positions = col_positions))

names(weather) <- c("Country", "Network", "ID", "COOP", "Latitude", "Longitude", "Elevation", "State", "Name", "Comp1", "Comp2", "Comp3", "DIFF")
library(ggplot2)

library(maps)
map_data("county")
states <- map_data("state")
a <- data.frame(usa)

ggplot(weather) + geom_polygon(aes(Longitude, Latitude))
#ggplot() +
#  geom_polygon(states, aes(x = long, y = lat, group = group), fill="white", color="black") +
#  geom_point(weather, aes(Longitude, Latitude))

```



```{r}
library("tidyr")
# download and unzip .gz in R
temp <- tempfile()
download.file("ftp://ftp.ncdc.noaa.gov/pub/data/ushcn/v2.5/ushcn.tavg.latest.raw.tar.gz",temp)
untar(temp)
unlink(temp)

# count the number of files in the downloaded and extracted folder
FileList <- list.files("/Users/min/Documents/ISU/585DataTechHoffman/Lab#1/ushcn.v2.5.5.20190204")
FileList %>% length()

# Lydia's hometown is Providence RI, and it corresponds to USH00376698
weather %>% 
  separate(Name, c('City', 'Other'), sep=" ", extra = "merge", fill = "right") %>% 
  filter(City == "PROVIDENCE", State == "RI") %>% 
  mutate(FileName = paste0(Country, Network, ID, COOP, ".raw.tavg")) %>% 
  pull(FileName)
```


